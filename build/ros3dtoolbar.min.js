var ROS3DTOOLBAR=ROS3DTOOLBAR||{REVISION:"1"};ROS3DTOOLBAR.DisplayOptionManager=function(e){var t=this;e=e||{},this.elementId=e.elementId,this.displayoptions=[],this.displayoptions.push(["Axes","AxesNode"]),this.displayoptions.push(["Camera","CameraNode"]),this.displayoptions.push(["Grid","GridNode"]),this.displayoptions.push(["InteractiveMarker","InteractiveMarkerNode"]),this.displayoptions.push(["LaserScan","LaserScanNode"]),this.displayoptions.push(["Marker","MarkerNode"]),this.displayoptions.push(["PointCloud2","PointCloud2Node"]),this.displayoptions.push(["RobotModel","RobotModelNode"]),this.displayoptions.push(["TF","TFNode"]);var i=document.createElement("select");i.setAttribute("id","addDisplayDropdown");for(var n=0;this.displayoptions.length>n;n++){var o=document.createElement("option");o.setAttribute("value",this.displayoptions[n][0]),o.setAttribute("title",this.displayoptions[n][0]),o.innerHTML=this.displayoptions[n][0],i.appendChild(o)}var a=document.getElementById(this.elementId);a.appendChild(i),i.addEventListener("change",function(){var e=this.selectedIndex,i=t.displayoptions[e];console.log(i),t.emit("change",i)})},ROS3DTOOLBAR.DisplayOptionManager.prototype.__proto__=EventEmitter2.prototype,ROS3DTOOLBAR.TFListManager=function(e){var t=this;e=e||{},this.ros=e.ros,this.elementId=e.elementId,this.fixedFrame=e.fixedFrame;var i=new ROSLIB.Service({ros:t.ros,name:"/tf_lister/request_list",serviceType:"tf_lister/TfLister"});console.log(this.fixedFrame);var n=new ROSLIB.ServiceRequest({});i.callService(n,function(e){var i=document.getElementById(t.elementId);i.options.length=0;var n=e.tf_list,o=!1;console.log(n.length);for(var a=0;n.length>a;a++){var d=document.createElement("option");d.setAttribute("value",n[a]),d.setAttribute("title",n[a]),d.innerHTML=n[a],i.appendChild(d),n[a]===t.fixedFrame&&(i.selectedIndex=a,o=!0,t.emit("change",t.fixedFrame))}o||(i.selectedIndex=0,t.fixedFrame=i.options[0].value,t.emit("change",t.fixedFrame))});var o=document.getElementById(this.elementId);o.addEventListener("change",function(){var e=document.getElementById(t.elementId).options,i=document.getElementById(t.elementId).selectedIndex;console.log("Your current fixed frame is..."),console.log(e[i].value),t.fixedFrame=e[i].value,t.emit("change",t.fixedFrame)})},ROS3DTOOLBAR.TFListManager.prototype.__proto__=EventEmitter2.prototype,ROS3DTOOLBAR.Toolbar=function(e){var t=this;e=e||{};var i=e.divID;this.ros=e.ros,this.rootObject=e.rootObject,this.currentFixedFrame=null,this.createdPopUp=!1,this.displayoptions=[],this.displayoptions.push(["Axes","AxesNode"]),this.displayoptions.push(["Camera","CameraNode"]),this.displayoptions.push(["Grid","GridNode"]),this.displayoptions.push(["InteractiveMarker","InteractiveMarkerNode"]),this.displayoptions.push(["LaserScan","LaserScanNode"]),this.displayoptions.push(["Marker","MarkerNode"]),this.displayoptions.push(["PointCloud2","PointCloud2Node"]),this.displayoptions.push(["RobotModel","RobotModelNode"]),this.displayoptions.push(["TF","TFNode"]);var n=document.getElementById(i),o=document.createElement("button");o.setAttribute("id","vis-panel-open"),o.innerHTML="<center> Visualization Control Panel </center>",n.appendChild(o);var a=document.createElement("div");a.setAttribute("id","visualization-dialog"),a.setAttribute("title","Visualization Control Panel");var d=document.createElement("div");d.setAttribute("id","visualizations"),a.appendChild(d),document.body.appendChild(a);var s=document.getElementById("vis-panel-open");s.addEventListener("click",function(){if(t.createdPopUp===!1){console.log(t.createdPopUp);var e=document.getElementById("visualization-dialog"),i=document.createElement("div");i.setAttribute("id","main-container"),i.setAttribute("title","Visualization Control Panel");var n=document.createElement("div");n.setAttribute("id","upperContFixedFrame");var o=document.createElement("div");o.setAttribute("id","upperContAddDisplay");var a=document.createElement("div");a.setAttribute("id","optLabel"),a.innerHTML="Fixed Frame";var d=document.createElement("div");d.setAttribute("id","optLabel"),d.innerHTML="Display Type";var s=document.createElement("select");s.setAttribute("id","tfsDropdown");var r="displayDropDown",l=document.createElement("div");l.setAttribute("id",r);var p=document.createElement("button");p.setAttribute("id","addDisplayBtn"),p.setAttribute("value","Add"),p.innerHTML="Add",n.appendChild(a),n.appendChild(s),o.appendChild(d),o.appendChild(l),o.appendChild(p),i.appendChild(n),i.appendChild(o);var u=document.createElement("div");u.setAttribute("id","midCont");var c=document.createElement("div");c.setAttribute("id","selectable_vis_list");var m=document.createElement("div");m.setAttribute("id","visualization_parameters"),u.appendChild(c),i.appendChild(u);var h=document.createElement("div");h.setAttribute("id","lowerCont");var v=document.createElement("input");v.setAttribute("type","button"),v.setAttribute("id","removeDisplayBtn"),v.setAttribute("value","Remove");var y=document.createElement("input");y.setAttribute("type","button"),y.setAttribute("id","applyBtn"),y.setAttribute("value","Apply"),h.appendChild(v),h.appendChild(y),i.appendChild(h),e.appendChild(i);var b=new ROS3DTOOLBAR.TFListManager({ros:t.ros,elementId:"tfsDropdown",fixedFrame:"/base_link"});b.on("change",function(e){t.currentFixedFrame=e}),new ROS3DTOOLBAR.DisplayOptionManager({elementId:r}),t.createdPopUp=!0}$("#visualization-dialog").dialog({closeOnEscape:!1,height:"auto",width:"auto",resizable:"false"})})};