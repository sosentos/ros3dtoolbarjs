var ROS3DTOOLBAR=ROS3DTOOLBAR||{REVISION:"1"};ROS3DTOOLBAR.TFListManager=function(e){var t=this;e=e||{},this.ros=e.ros,this.elementId=e.elementId,this.fixedFrame=e.fixedFrame;var i=new ROSLIB.Service({ros:t.ros,name:"/tf_lister/request_list",serviceType:"tf_lister/TfLister"});console.log(this.fixedFrame);var n=new ROSLIB.ServiceRequest({});i.callService(n,function(e){var i=document.getElementById(t.elementId);i.options.length=0;var n=e.tf_list,a=!1;console.log(n.length);for(var d=0;n.length>d;d++){var o=document.createElement("option");o.setAttribute("value",n[d]),o.setAttribute("title",n[d]),o.innerHTML=n[d],i.appendChild(o),n[d]===t.fixedFrame&&(i.selectedIndex=d,a=!0,t.emit("change",t.fixedFrame))}a||(i.selectedIndex=0,t.fixedFrame=i.options[0].value,t.emit("change",t.fixedFrame))});var a=document.getElementById(this.elementId);a.addEventListener("change",function(){var e=document.getElementById(t.elementId).options,i=document.getElementById(t.elementId).selectedIndex;console.log("Your current fixed frame is..."),console.log(e[i].value),t.fixedFrame=e[i].value,t.emit("change",t.fixedFrame)})},ROS3DTOOLBAR.TFListManager.prototype.__proto__=EventEmitter2.prototype,ROS3DTOOLBAR.Toolbar=function(e){var t=this;e=e||{};var i=e.divID;this.ros=e.ros,this.rootObject=e.rootObject,this.currentFixedFrame=null,this.createdPopUp=!1,this.displayoptions=[],this.displayoptions.push(["Axes","AxesNode"]),this.displayoptions.push(["Camera","CameraNode"]),this.displayoptions.push(["Grid","GridNode"]),this.displayoptions.push(["InteractiveMarker","InteractiveMarkerNode"]),this.displayoptions.push(["LaserScan","LaserScanNode"]),this.displayoptions.push(["Marker","MarkerNode"]),this.displayoptions.push(["PointCloud2","PointCloud2Node"]),this.displayoptions.push(["RobotModel","RobotModelNode"]),this.displayoptions.push(["TF","TFNode"]);var n=document.getElementById(i),a=document.createElement("button");a.setAttribute("id","vis-panel-open"),a.innerHTML="<center> Visualization Control Panel </center>",n.appendChild(a);var d=document.createElement("div");d.setAttribute("id","visualization-dialog"),d.setAttribute("title","Visualization Control Panel");var o=document.createElement("div");o.setAttribute("id","visualizations"),d.appendChild(o),document.body.appendChild(d);var r=document.getElementById("vis-panel-open");r.addEventListener("click",function(){if(t.createdPopUp===!1){console.log(t.createdPopUp);var e=document.getElementById("visualization-dialog"),i=document.createElement("div");i.setAttribute("id","main-container"),i.setAttribute("title","Visualization Control Panel");var n=document.createElement("div");n.setAttribute("id","upperContFixedFrame");var a=document.createElement("div");a.setAttribute("id","upperContAddDisplay");var d=document.createElement("div");d.setAttribute("id","optLabel"),d.innerHTML="Fixed Frame";var o=document.createElement("div");o.setAttribute("id","optLabel"),o.innerHTML="Display Type";var r=document.createElement("select");r.setAttribute("id","tfsDropdown");var s=document.createElement("select");s.setAttribute("id","addDisplayDropdown"),console.log(t.displayoptions.length);for(var l=0;t.displayoptions.length>l;l++){var p=document.createElement("option");p.setAttribute("value",t.displayoptions[l][0]),p.setAttribute("title",t.displayoptions[l][0]),p.innerHTML=t.displayoptions[l][0],s.appendChild(p)}var u=document.createElement("button");u.setAttribute("id","addDisplayBtn"),u.setAttribute("value","Add"),u.innerHTML="Add",n.appendChild(d),n.appendChild(r),a.appendChild(o),a.appendChild(s),a.appendChild(u),i.appendChild(n),i.appendChild(a);var c=document.createElement("div");c.setAttribute("id","midCont");var m=document.createElement("div");m.setAttribute("id","selectable_vis_list");var v=document.createElement("div");v.setAttribute("id","visualization_parameters"),c.appendChild(m),i.appendChild(c);var h=document.createElement("div");h.setAttribute("id","lowerCont");var b=document.createElement("input");b.setAttribute("type","button"),b.setAttribute("id","removeDisplayBtn"),b.setAttribute("value","Remove");var A=document.createElement("input");A.setAttribute("type","button"),A.setAttribute("id","applyBtn"),A.setAttribute("value","Apply"),h.appendChild(b),h.appendChild(A),i.appendChild(h),e.appendChild(i);var y=new ROS3DTOOLBAR.TFListManager({ros:t.ros,elementId:"tfsDropdown",fixedFrame:"/base_link"});y.on("change",function(e){t.currentFixedFrame=e}),t.createdPopUp=!0}$("#visualization-dialog").dialog({closeOnEscape:!1,height:"auto",width:"auto",resizable:"false"})})};